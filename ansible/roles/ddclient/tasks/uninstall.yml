# Start the ddclient docker container with prepared config file
- name: Stop Container - ddclient
  docker_container:
    state: absent
    name: ddclient
    hostname: ddclient
    image: linuxserver/ddclient
    restart_policy: unless-stopped
    volumes:
      - "{{ ddclient_config_dir }}:/config:Z"
    env:
      PGID: "{{ ddclient_group_id }}"
      PUID: "{{ ddclient_user_id }}"
      TZ: "Europe/Berlin"

# Create User for ddclient
- name: Delete User - ddclient
  user:
    state: absent
    remove: yes
    name: "{{ ddclient_user_name }}"

# Remove config directory
- name: "Remove Directory - {{ ddclient_config_dir }}"
  file:
    path: "{{ ddclient_config_dir }}"
    state: absent
