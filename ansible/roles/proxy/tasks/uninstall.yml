# Remove proxy-nginx container
- name: Stop and Remove Container - proxy-nginx
  docker_container:
    state: absent
    name: proxy-nginx
    hostname: proxy-nginx
    image: nginx:alpine
    keep_volumes: "no"

# Remove proxy-nginx container
- name: Stop and Remove Container - proxy-certbot
  docker_container:
    state: absent
    name: proxy-certbot
    hostname: proxy-certbot
    image: certbot:certbot
    keep_volumes: "no"

# Remove proxy network
- name: Remove Docker Network - proxy_net
  docker_network:
    state: absent
    name: proxy_net

# Delete the certs
- name: Delete Files - certbot certificates
  file:
    state: absent
    path: "{{ item }}"
  with_items:
    - "{{ proxy_certbot_conf_path }}/live/{{ proxy_domain }}/"
    - "{{ proxy_certbot_conf_path }}/archive/{{ proxy_domain }}/"
    - "{{ proxy_certbot_conf_path }}/renewal/{{ proxy_domain }}.conf"

